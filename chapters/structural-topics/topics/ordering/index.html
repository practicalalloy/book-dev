<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="Module system" href="../modules/index.html" /><link rel="prev" title="Arrow multiplicity checks" href="../bestiary/index.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>The predefined ordering module - Practical Alloy</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #2a5adf;
  --color-brand-content: #2a5adf;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">Practical Alloy</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">Practical Alloy</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Preface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about-alloy/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about-book/index.html">About this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writer-notes.html">Writer notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../structural-modeling/index.html">Structural modeling</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">↳ Quick reads</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of ↳ Quick reads</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../subset-signatures/index.html">Subset signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nary-relations/index.html">Higher-arity relations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../enumerations/index.html">Enumeration signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Commands in detail</a></li>
<li class="toctree-l2"><a class="reference internal" href="../themes/index.html">Visualization customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluator/index.html">The instance evaluator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-instances/index.html">Encoding test instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../relational-logic/index.html">A relational logic primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bestiary/index.html">Arrow multiplicity checks</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">The predefined <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">ordering</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/index.html">Module system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recursion/index.html">Handling recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integers/index.html">Working with integers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../type-system/index.html">Type system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html">Structural analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../behavioral-modeling/index.html">Behavioral modeling</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../behavioral-topics/index.html">↳ Quick reads</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of ↳ Quick reads</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/mutable-toplevel-signatures/index.html">Mutable top-level signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/event-depiction/index.html">An idiom for event depiction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/scenarios/index.html">Encoding trace scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/evaluator/index.html">The trace evaluator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/temporal-logic/index.html">A temporal logic primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/pointwise-effects/index.html">Pointwise effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/fairness/index.html">Safety, Liveness and Fairness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/sequences/index.html">Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/macros/index.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/meta/index.html">Meta-capabilities</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../protocol-design/index.html">Protocol design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app-design/index.html">App design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interaction-design/index.html">Interaction design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../system-design/index.html">Controller design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="the-predefined-ordering-module">
<span id="ordering"></span><h1>The predefined <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">ordering</span></code> module<a class="headerlink" href="#the-predefined-ordering-module" title="Link to this heading">#</a></h1>
<p id="index-0">Alloy has some predefined modules in a special <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span></code> namespace. One of them is <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code>, a parametrized module that can be used to impose a total order in a signature.
In particular, this module defines a <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code> relation that given an atom returns the next atom in the total order, and two derived singleton signatures <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">first</span></code> and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">last</span></code> with the first and last atoms of the order, respectively. Note that <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">last</span></code> is the only atom without a <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code> atom in the order. Module <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> also defines several derived predicates and functions to compare and compute the maximum or minimum of sets of elements (for example, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">gt</span></code> is a predicate that can be used to compare if one atom is greater than than another, and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">max</span></code> is a function that computes the maximum of a given set of atoms).</p>
<p id="index-1">For example, let’s suppose we wanted to enrich our file system model with the creation timestamp of each entry. Since we will want to compare timestamps, we could first declare a totally ordered signature <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Time</span></code> as follows.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span> <span class="nn">util</span><span class="o">/</span><span class="n">ordering</span><span class="o">[</span><span class="n">Time</span><span class="o">]</span>
<span class="kd">sig</span> <span class="nc">Time</span> <span class="o">{}</span>
</pre></div>
</div>
<p>The definition of signature <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Entry</span></code> could now be changed to include the creation timestamp attribute.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="kd">sig</span> <span class="nc">Entry</span> <span class="o">{</span>
  <span class="n">object</span> <span class="p">:</span> <span class="k">one</span> <span class="n">Object</span><span class="p">,</span>
  <span class="n">name</span>   <span class="p">:</span> <span class="k">one</span> <span class="n">Name</span><span class="p">,</span>
  <span class="n">time</span>   <span class="p">:</span> <span class="k">one</span> <span class="n">Time</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Of course, we should impose a new constraint stating that the creation timestamp of an entry should precede that of its children.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="k">fact</span> <span class="nf">children_timestamp</span> <span class="o">{</span>
  <span class="c1">// The timestamp of an entry precedes that of its children</span>
  <span class="k">all</span> <span class="n">e</span> <span class="p">:</span> <span class="n">Entry</span><span class="p">,</span> <span class="n">t</span> <span class="p">:</span> <span class="n">e</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">time</span> <span class="o">|</span> <span class="n">lt</span><span class="o">[</span><span class="n">e</span><span class="o">.</span><span class="n">time</span><span class="p">,</span><span class="n">t</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note the use of a chain of compositions to get all timestamps of all entries contained in the object of an entry. If the object is a file this set will be obviously empty and the constraint holds trivially. If it is a directory, then the timestamp of the respective entry must be less than those of all its children.</p>
<p>If we run the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">example</span></code> command with a scope of 4, and customize the theme to show timestamps as attributes, we could get the following example filesystem.</p>
<a class="reference internal image-reference" href="../../../../_images/instance123.png"><img alt="../../../../_images/instance123.png" class="align-center" src="../../../../_images/instance123.png" style="width: 400px;" /></a>
<p>Due to the way they are defined in <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code>, relations <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">first</span></code>, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">last</span></code>, and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code> are not shown in the visualizer. In principle, this would make it very difficult to understand how the timestamps are ordered, and check if instances are valid.
However, the module <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> is handled in special way be the Alloy Analyzer, which will attempt to name the inhabitants of the ordered signature sequentially according to the order defined by <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code>. In our instance this means that <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Time0</span></code> is the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">first</span></code>, which is followed by <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Time1</span></code>, then <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Time2</span></code>, and finally <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Time3</span></code>, which is the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">last</span></code>. If we really want to confirm the value of the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code> relation we could go to the evaluator and ask for its value. However, we will get an ambiguity error since <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">next</span></code> is also defined in the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">integer</span></code> module that is imported by default. To disambiguate we could type the qualified name <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">ordering</span><span class="o">/</span><span class="n">next</span></code> instead.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>not true in 6.1, they will appear, but perhaps best to hide them in theme</p>
</div>
<a class="reference internal image-reference" href="../../../../_images/evaluator13.png"><img alt="../../../../_images/evaluator13.png" class="align-center" src="../../../../_images/evaluator13.png" style="width: 500px;" /></a>
<p>To see what other functions and derived relations are declared in <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> you can open it in the menu <span class="menuselection">File ‣ Open Sample Models…</span>.</p>
<p>The above fact, imposing that the creation timestamp of an entry should precede that of its children, actually makes fact <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">no_indirect_containment</span></code> redundant, since it is no longer  possible for directories to contain themselves directly or indirectly. We can confirm this by changing that fact to an assertion and using the Analyzer to verify it.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nf">no_indirect_containment</span> <span class="o">{</span>
   <span class="c1">// Directories cannot contain themselves directly or indirectly</span>
   <span class="k">all</span> <span class="n">d</span> <span class="p">:</span> <span class="n">Dir</span> <span class="o">|</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">descendants</span><span class="o">[</span><span class="n">d</span><span class="o">]</span>
<span class="o">}</span>
<span class="k">check</span> <span class="n">no_indirect_containment</span> <span class="k">for</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Besides naming the atoms according to the total order, module <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> has another peculiarity concerning the analysis. The scope of the signature that is passed as parameter to <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> is always exact even if not declared with <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="k">exactly</span></code>. The reason for this is to make analysis faster, but one should always be aware of this detail when running commands, as it can sometimes introduce inconsistencies, making  <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="k">run</span></code> commands trivially unsatisfiable or <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="k">check</span></code> commands trivially valid.</p>
<p>As an example, consider the following (rather arbitrary) model of a finite sequence of natural numbers, distinguishing between even and odd numbers, and requiring the first in the sequence to be even and the last to be odd.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span> <span class="nn">util</span><span class="o">/</span><span class="n">ordering</span><span class="o">[</span><span class="n">Nat</span><span class="o">]</span>

<span class="k">abstract</span> <span class="kd">sig</span> <span class="nc">Nat</span> <span class="o">{}</span>
<span class="kd">sig</span> <span class="nc">Even</span><span class="p">,</span> <span class="nc">Odd</span> <span class="k">extends</span> <span class="nc">Nat</span> <span class="o">{}</span>

<span class="k">fact</span> <span class="o">{</span>
  <span class="k">all</span> <span class="n">n</span> <span class="p">:</span> <span class="n">Even</span> <span class="o">|</span> <span class="n">n</span><span class="o">.</span><span class="n">next</span> <span class="ow">in</span> <span class="n">Odd</span>
  <span class="k">all</span> <span class="n">n</span> <span class="p">:</span> <span class="n">Odd</span> <span class="o">|</span> <span class="n">n</span><span class="o">.</span><span class="n">next</span> <span class="ow">in</span> <span class="n">Even</span>
  <span class="n">first</span> <span class="ow">in</span> <span class="n">Even</span>
  <span class="n">last</span> <span class="ow">in</span> <span class="n">Odd</span>
<span class="o">}</span>

<span class="k">run</span> <span class="n">example</span> <span class="o">{}</span>
</pre></div>
</div>
<p>If we execute the command <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">example</span></code> we get no instance! This is due to the fact that the default scope for <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Nat</span></code> is 3, and since this signature is being totally ordered with <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> this scope is required to be exact. Unfortunately, with exactly 3 atoms in <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Nat</span></code> it is impossible to satisfy the given constraints. If we change the scope of <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">example</span></code> to 4 then we will obtain one instance.</p>
<a class="reference internal image-reference" href="../../../../_images/instance210.png"><img alt="../../../../_images/instance210.png" class="align-center" src="../../../../_images/instance210.png" style="width: 400px;" /></a>
<p>This is also an example where the naming of the atoms does not help in understanding what is the total order, since the ordered signature <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Nat</span></code> is abstract and extended by <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Even</span></code> and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Odd</span></code>. By using the evaluator we can see that the total order is <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Even0</span></code>, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Odd1</span></code>, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Even1</span></code>, and lastly <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Odd0</span></code>.</p>
<a class="reference internal image-reference" href="../../../../_images/evaluator22.png"><img alt="../../../../_images/evaluator22.png" class="align-center" src="../../../../_images/evaluator22.png" style="width: 500px;" /></a>
<p>As a last note on scopes, for efficiency reasons the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">util</span><span class="o">/</span><span class="n">ordering</span></code> module also requires the parameter signature to be non-empty (it forces <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">first</span></code> and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">last</span></code> to always contain exactly one atom), meaning that setting its scope to 0 will also result in an inconsistent specification.</p>
<div class="sd-sphinx-override sd-cards-carousel sd-card-cols-2 docutils">
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-header docutils">
<p class="sd-card-text"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-link" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg> Further reading</p>
</div>
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Working with integers</div>
<p class="sd-card-text">Learn how to use integers in Alloy.</p>
</div>
<a class="sd-stretched-link reference internal" href="../integers/index.html#integers"><span class="std std-ref"></span></a></div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-header docutils">
<p class="sd-card-text"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-link" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg> Further reading</p>
</div>
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Module system</div>
<p class="sd-card-text">Learn how to define your own modules in Alloy, and the strategy used in <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">ordering</span></code>.</p>
</div>
<a class="sd-stretched-link reference internal" href="../modules/index.html#modules"><span class="std std-ref"></span></a></div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../modules/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Module system</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../bestiary/index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Arrow multiplicity checks</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2024, Alcino Cunha, Nuno Macedo, Julien Brunel, David Chemouil
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=10f1778b"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>