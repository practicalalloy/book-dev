<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="The instance evaluator" href="../evaluator/index.html" /><link rel="prev" title="Commands in detail" href="../commands/index.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>Visualization customization - Practical Alloy</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #2a5adf;
  --color-brand-content: #2a5adf;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">Practical Alloy</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">Practical Alloy</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Preface</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about-alloy/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../about-book/index.html">About this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../writer-notes.html">Writer notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../structural-modeling/index.html">Structural modeling</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">↳ Quick reads</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of ↳ Quick reads</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../subset-signatures/index.html">Subset signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nary-relations/index.html">Higher-arity relations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../enumerations/index.html">Enumeration signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/index.html">Commands in detail</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Visualization customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evaluator/index.html">The instance evaluator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing-instances/index.html">Encoding test instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../relational-logic/index.html">A relational logic primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bestiary/index.html">Arrow multiplicity checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ordering/index.html">The predefined <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">ordering</span></code> module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/index.html">Module system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../recursion/index.html">Handling recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integers/index.html">Working with integers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../type-system/index.html">Type system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/index.html">Structural analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../behavioral-modeling/index.html">Behavioral modeling</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../behavioral-topics/index.html">↳ Quick reads</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of ↳ Quick reads</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/mutable-toplevel-signatures/index.html">Mutable top-level signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/event-depiction/index.html">An idiom for event depiction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/scenarios/index.html">Encoding trace scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/evaluator/index.html">The trace evaluator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/temporal-logic/index.html">A temporal logic primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/pointwise-effects/index.html">Pointwise effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/fairness/index.html">Safety, Liveness and Fairness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/sequences/index.html">Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/macros/index.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../behavioral-topics/topics/meta/index.html">Meta-capabilities</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../protocol-design/index.html">Protocol design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app-design/index.html">App design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../interaction-design/index.html">Interaction design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../system-design/index.html">Controller design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="visualization-customization">
<span id="theme-customization"></span><h1>Visualization customization<a class="headerlink" href="#visualization-customization" title="Link to this heading">#</a></h1>
<p id="index-0">The visualizer provided by the Analyzer is one of the most popular features of
Alloy, since it allows the inspection and navigation of scenarios or
counter-examples. However, as models become more complex, the interpretation of
instances becomes more challenging. To ease this process, the visualizer allows
the graphical visualization of instances to be customized through themes.</p>
<section id="id1">
<h2>Theme customization<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>Let us get back to our file system example from the main chapter
<a class="reference internal" href="../../../structural-modeling/index.html#structural-modeling"><span class="std std-ref">Structural modeling</span></a> and focus on an instance generated by command
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">example</span></code>. With the default visualization of the instances, it looks as
follows.</p>
<a class="reference internal image-reference" href="../../../../_images/instance128.png"><img alt="../../../../_images/instance128.png" class="align-center" src="../../../../_images/instance128.png" style="width: 400px;" /></a>
<p>To customize it, we can open the theme customization menu, by pressing the
button <span class="guilabel">Theme</span> in the toolbar of the instance visualizer pop-up
window. The first customization we will apply is to show the names of directory
entries as attributes in the respective atoms, instead of using arrows pointing
to the name. This will unclutter substantially the depiction and is a very
common customization for fields of multiplicity <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="k">one</span></code>, in particular for
fields that somehow act as identifiers, as is the case of <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">name</span></code>. To do
so, first select the field <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">name</span></code>, and then tick the <span class="guilabel">Show as
attribute</span> option in the top pane. This option will show the name of an entry as
an attribute but still keep the respective arrows. To remove them, tick twice
<span class="guilabel">Show as arcs</span> to choose the <span class="guilabel">Off</span> option. Your theme
options for relation <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">name</span></code> should look as follows.</p>
<a class="reference internal image-reference" href="../../../../_images/theme11.png"><img alt="../../../../_images/theme11.png" class="align-center" src="../../../../_images/theme11.png" style="width: 700px;" /></a>
<p>By pressing <span class="guilabel">Apply</span> in the toolbar and then <span class="guilabel">Close</span> the instance
will now be depicted as follows.</p>
<a class="reference internal image-reference" href="../../../../_images/instance215.png"><img alt="../../../../_images/instance215.png" class="align-center" src="../../../../_images/instance215.png" style="width: 450px;" /></a>
<p>We now have some unconnected <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Name</span></code> atoms. Since names were only
used in directory entries, where they are now shown as attribute, we
can remove them from the graph. To do so, select <span class="guilabel">Theme</span>
again (actually when changing many options it is better to keep the
theme customization menu open and just keep pressing <span class="guilabel">Apply</span>
without closing it to see the effect), select the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Name</span></code> signature,
and then tick the <span class="guilabel">Show</span> option twice to choose the
<span class="guilabel">Off</span> option. After pressing <span class="guilabel">Apply</span> the
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Name</span></code> atom will disappear.</p>
<a class="reference internal image-reference" href="../../../../_images/theme21.png"><img alt="../../../../_images/theme21.png" class="align-center" src="../../../../_images/theme21.png" style="width: 700px;" /></a>
<p>Another common customization is to give different colors (or different
shapes and borders) to atoms belonging to different signatures. First, we will
select a different color palette, with more subdue colors. First
select the <span class="guilabel">general graph settings</span>, and select the
<span class="guilabel">Martha</span> (for Martha Stewart) palette both for node and edge
colors. After pressing <span class="guilabel">Apply</span> we will get some nice faded colours.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>update figure to 6.1, hide skolems option</p>
</div>
<a class="reference internal image-reference" href="../../../../_images/theme3.png"><img alt="../../../../_images/theme3.png" class="align-center" src="../../../../_images/theme3.png" style="width: 700px;" /></a>
<p>Since entries are auxiliary structures in defining the (supposedly)
tree-like structure of the file system, we will paint them grey. To do
so select signature <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Entry</span></code>, then the colour <span class="guilabel">Gray</span> in
the drop-down menu in the top left-hand corner, and finally <span class="guilabel">Apply</span>.</p>
<a class="reference internal image-reference" href="../../../../_images/theme4.png"><img alt="../../../../_images/theme4.png" class="align-center" src="../../../../_images/theme4.png" style="width: 700px;" /></a>
<p>For file system objects we will choose a more eye-catching red color. We don’t
have to set this colour separately for signatures <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Dir</span></code>, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Root</span></code> and <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">File</span></code>. By default
most theme options of extension signatures are set as <span class="guilabel">Inherited</span> from
their parent signature. As such, it suffices to set the color red for the
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Object</span></code> signature, and both their children will inherit this setting.
Finally we will choose different shapes for different file system objects. Let’s
keep files as rectangles, but choose the shape <span class="guilabel">Trapezoid</span> for
directories and a <span class="guilabel">House</span> for the root. The shape can be chosen in the
drop-down menu in the top right-hand corner. The combo-box to the left of that
one changes the style of the border. After pressing <span class="guilabel">Apply</span> we have
the following visualization.</p>
<a class="reference internal image-reference" href="../../../../_images/theme5.png"><img alt="../../../../_images/theme5.png" class="align-center" src="../../../../_images/theme5.png" style="width: 700px;" /></a>
<p>One last customization that is often useful is to change the label of an element
in the graph, be it a signature, a subset or relation (for instance, to make it
shorter, or to removed the namespace prepended to elements from other
modules). This can be changed in the text box in the top left-hand corner after
selecting an element.</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>should we mention the magic color for sigs/fields added in 6.1? also, color-blind friendly palette?</p>
</div>
</section>
<section id="managing-themes">
<h2>Managing themes<a class="headerlink" href="#managing-themes" title="Link to this heading">#</a></h2>
<p id="index-1">For the moment these are all the customizations we will use, and so we
can close the theme customization menu. Notice that you can always reset
your theme settings by going to the menu option <span class="menuselection">Theme
‣ Reset theme</span>. You can also save your theme for later use in the
option <span class="menuselection">Theme ‣ Save theme</span>. Occasionally it is also
useful to have multiple themes for the same model, highlighting different
facets of the instances.</p>
<p>Instead of customizing manually your theme, you can also try out the
<span class="guilabel">Magic Layout</span> button in the toolbar of the instance visualizer. This
will “magically” choose options for visualizing the different elements of your
specification based on the signature and field declarations. Sometimes the
results are good enough and it will save you some work. The result of magic
layout for our instance is the following.</p>
<a class="reference internal image-reference" href="../../../../_images/instance39.png"><img alt="../../../../_images/instance39.png" class="align-center" src="../../../../_images/instance39.png" style="width: 500px;" /></a>
<p>More information about how the magic layout actually works can be found in
<a class="reference internal" href="../../../../bibliography.html#led07" id="id4"><span>[LED07]</span></a>. In this case we prefer our handmade customization and so we will load
back our previously saved theme by selecting <span class="menuselection">Theme ‣ Load
theme</span> in the menu.</p>
<a class="reference internal image-reference" href="../../../../_images/instance45.png"><img alt="../../../../_images/instance45.png" class="align-center" src="../../../../_images/instance45.png" style="width: 450px;" /></a>
</section>
<section id="improved-visualisation-with-derived-relations">
<h2>Improved visualisation with derived relations<a class="headerlink" href="#improved-visualisation-with-derived-relations" title="Link to this heading">#</a></h2>
<p id="index-2">Alloy supports the definition of derived relations through the declaration of
<em>functions</em>. These are declared with the keyword <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="k">fun</span></code>, followed by the
function name, an optional list of function parameters, its return type, and an
expression enclosed between braces. The return type can be any relational
expression with arbitrary arity. Once declared, these functions can be freely
used in relational expressions. Additionally, <em>parameterless</em> functions are also
processed by the visualizer and presented alongside the signatures and fields of the instance, even if not
used in the specification at all. This section shows how to explore this feature for further tweaking instance visualization.</p>
<p>Let’s say that we want to highlight in our visualization the directories that
are empty. A possibility would be to introduce a new subset signature and
restrict its value to always be the set of empty directories. However, due to
the nature of the Alloy analysis procedures, such a signature would have to be
solved by the Analyzer, possible impacting its performance. If we introduce a
function that calculates this set, the Analyzer will calculate its value after
the instance is generated and present it in the visualizer. Since they are
introduced by the visualizer after the solving process, they can be freely
abused without undermining the performance of the analysis. Such a function that
retrieves all empty directories would be defined as follows.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">empty_dirs</span> <span class="p">:</span> <span class="k">set</span> <span class="n">Dir</span> <span class="o">{</span>
   <span class="n">Dir</span> <span class="o">-</span> <span class="n">entries</span><span class="o">.</span><span class="n">Entry</span>
<span class="o">}</span>
</pre></div>
</div>
<p>For instance, using the same instance as above, the visualization would now be as follows.</p>
<a class="reference internal image-reference" href="../../../../_images/instance53.png"><img alt="../../../../_images/instance53.png" class="align-center" src="../../../../_images/instance53.png" style="width: 450px;" /></a>
<p>Notice how the empty directory at the bottom has an additional label
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">$empty_dirs</span></code>. All visualization elements introduced in the visualizer
that are not part of the model  are prefixed with a <code class="code docutils literal notranslate"><span class="pre">$</span></code>. Since function
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">empty_dirs</span></code> returns a set, it is interpreted as a subset of <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Dir</span></code>
which by default are shown as labels in the theme. As expected, their depiction
can be customised as any other signature. For instance, to highlight empty
directories in the depiction, open the theme customisation menu, and set the border of
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">$empty_dirs</span></code> subset of <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Dir</span></code> to be <span class="guilabel">Dotted</span> and the
displayed name to just <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">empty</span></code>. The resulting depiction is below. You could also hide
the label of this subset altogether by just
setting to <span class="guilabel">Show as labels</span> to <span class="guilabel">Off</span> for
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">$empty_dirs</span></code>.</p>
<a class="reference internal image-reference" href="../../../../_images/theme6.png"><img alt="../../../../_images/theme6.png" class="align-center" src="../../../../_images/theme6.png" style="width: 700px;" /></a>
<p>Parameterless derived functions are introduced in the visualization regardless
of their arity, resulting in additional edges for relations of arity higher than
1. For instance, let’s say we wanted to directly depict the relation between
directories and their content, hiding the entry intermediary atoms. We could
define the binary relation below in the specification.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">contents</span> <span class="p">:</span> <span class="n">Dir</span> <span class="o">-&gt;</span> <span class="n">Object</span> <span class="o">{</span>
   <span class="n">entries</span><span class="o">.</span><span class="n">object</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Running the command again results in the depiction below, with
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">$contents</span></code> edges directly between directories and objects.</p>
<a class="reference internal image-reference" href="../../../../_images/instance64.png"><img alt="../../../../_images/instance64.png" class="align-center" src="../../../../_images/instance64.png" style="width: 450px;" /></a>
<p>Once we start introducing derived relations, it is often useful to hide others
elements in order to unclutter the visualizer. In this case, we simply set
<span class="guilabel">Show</span> to <span class="guilabel">Off</span> for the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Entry</span></code> signature, resulting
in the compact depiction below where the content of directories is evident.</p>
<a class="reference internal image-reference" href="../../../../_images/instance74.png"><img alt="../../../../_images/instance74.png" class="align-center" src="../../../../_images/instance74.png" style="width: 400px;" /></a>
<p id="index-3">A consequence of short-circuiting entries in the visualizer is that we can no
longer see the name of the objects inside a directory. Relations with arity
higher than 2 are depicted in the visualizer as edges with labels. Thus, a
ternary relation between signatures <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Dir</span></code>, <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Name</span></code> and
<code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">Object</span></code> could be used to directly show the content of a directory but
also show its name in a label. Defining such relations is often not trivial, and
usually requires defining relations by comprehension. In this case this ternary
relation could be defined as follows.</p>
<div class="highlight-electrum notranslate"><div class="highlight"><pre><span></span><span class="k">fun</span> <span class="nf">named_contents</span> <span class="p">:</span> <span class="n">Dir</span> <span class="o">-&gt;</span> <span class="n">Name</span> <span class="o">-&gt;</span> <span class="n">Object</span> <span class="o">{</span>
   <span class="o">{</span> <span class="n">d</span> <span class="p">:</span> <span class="n">Dir</span><span class="p">,</span> <span class="n">n</span> <span class="p">:</span> <span class="n">Name</span><span class="p">,</span> <span class="n">o</span> <span class="p">:</span> <span class="n">Object</span> <span class="o">|</span>
      <span class="k">some</span> <span class="n">e</span> <span class="p">:</span> <span class="n">Entry</span> <span class="o">|</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">entries</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">o</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Here, we are collecting all triples <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">d</span><span class="o">-&gt;</span><span class="n">n</span><span class="o">-&gt;</span><span class="n">o</span></code> such that there is an
entry in <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">d</span></code> that has name <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">n</span></code> and object <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">o</span></code>. The resulting
depiction is shown below, where the names of the objects inside directories can be seen as a label of the <code class="code highlight alloy electrum docutils literal highlight-electrum"><span class="n">$named_contents</span></code> edges.</p>
<a class="reference internal image-reference" href="../../../../_images/instance84.png"><img alt="../../../../_images/instance84.png" class="align-center" src="../../../../_images/instance84.png" style="width: 400px;" /></a>
</section>
<section id="alternative-visualizations">
<h2>Alternative visualizations<a class="headerlink" href="#alternative-visualizations" title="Link to this heading">#</a></h2>
<p id="index-4">As a last note, it is worth mentioning that the Analyzer also supports
alternative visualizations other than the graph one we’ve explored in this
chapter. In the visualizer toolbar, buttons <span class="guilabel">Viz</span>, <span class="guilabel">Txt</span>,
<span class="guilabel">Table</span>, and <span class="guilabel">Tree</span> control the representation of the
instance. Option <span class="guilabel">Viz</span> is the default graph representation, while the
other 3 are textual representations of the relations in plain text, tabular
format, and in hierarchical structure. For illustration purposes, below is the
representation of the same instance in tabular format, where each table denotes
a signature and the associated fields. Despite the usefulness of the graph
visualization, when instances become too complex these barebones representations
can prove helpful.</p>
<a class="reference internal image-reference" href="../../../../_images/table1.png"><img alt="../../../../_images/table1.png" class="align-center" src="../../../../_images/table1.png" style="width: 500px;" /></a>
<div class="sd-sphinx-override sd-cards-carousel sd-card-cols-2 docutils">
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-header docutils">
<p class="sd-card-text"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-link" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg> Further reading</p>
</div>
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
The intance evaluator</div>
<p class="sd-card-text">The visualizer also provides an evaluator that supports the analysis of the instance being shown. Learn how to use it.</p>
</div>
<a class="sd-stretched-link reference internal" href="../evaluator/index.html#evaluator-instance"><span class="std std-ref"></span></a></div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm sd-card-hover docutils">
<div class="sd-card-header docutils">
<p class="sd-card-text"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-link" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg> Further reading</p>
</div>
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Analysis in detail</div>
<p class="sd-card-text">You might have noticed <code class="code docutils literal notranslate"><span class="pre">$</span></code> prefixed visualization elements that are not from derived functions. Learn about such Skolemized variables.</p>
</div>
<a class="sd-stretched-link reference internal" href="../commands/index.html#commands"><span class="std std-ref"></span></a></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../evaluator/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">The instance evaluator</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../commands/index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Commands in detail</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021-2024, Alcino Cunha, Nuno Macedo, Julien Brunel, David Chemouil
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Visualization customization</a><ul>
<li><a class="reference internal" href="#id1">Theme customization</a></li>
<li><a class="reference internal" href="#managing-themes">Managing themes</a></li>
<li><a class="reference internal" href="#improved-visualisation-with-derived-relations">Improved visualisation with derived relations</a></li>
<li><a class="reference internal" href="#alternative-visualizations">Alternative visualizations</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=10f1778b"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>